<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Software Documentation &mdash; WoPMaRS 1.1.1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="WoPMaRS 1.1.1 documentation" href="index.html" />
    <link rel="prev" title="ToolWrapper development" href="dev_wrapper.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="software-documentation">
<h1>Software Documentation<a class="headerlink" href="#software-documentation" title="Permalink to this headline">¶</a></h1>
<p>This manual is dedicated to the developers who want to improve <strong>WoPMaRS</strong> by adding new features or correcting bugs.</p>
<div class="section" id="table-of-content">
<h2>Table of Content<a class="headerlink" href="#table-of-content" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Software Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#table-of-content">Table of Content</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-wopmars-development-environment">Setting up WoPMaRS development environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#contributing-to-wopmars-documentation">Contributing to WoPMaRS documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sub-packages-descriptions">Sub-packages descriptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#bin">bin</a></li>
<li class="toctree-l3"><a class="reference internal" href="#docs">docs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wopmars">wopmars</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#wopmars-tagc-example">wopmars.tagc.example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wopmars-tagc-framework">wopmars.tagc.framework</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#wopmars-tagc-framework-bdd">wopmars.tagc.framework.bdd</a></li>
<li class="toctree-l5"><a class="reference internal" href="#wopmars-tagc-framework-management">wopmars.tagc.framework.management</a></li>
<li class="toctree-l5"><a class="reference internal" href="#wopmars-tagc-framework-parsing">wopmars.tagc.framework.parsing</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#the-history-of-wopmars-executions">The history of WoPMaRS executions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-the-execution-dag">Building the execution DAG</a></li>
<li class="toctree-l2"><a class="reference internal" href="#executing-the-dag">Executing the DAG</a></li>
<li class="toctree-l2"><a class="reference internal" href="#managing-the-database">Managing the DataBase</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="setting-up-wopmars-development-environment">
<h2>Setting up WoPMaRS development environment<a class="headerlink" href="#setting-up-wopmars-development-environment" title="Permalink to this headline">¶</a></h2>
<p>Once you have downloaded <strong>WoPMaRS</strong> from git, you should want to process the <cite>unittests</cite> in order to make sure that everything is ok.</p>
<p>First, install the dependencies from the <code class="docutils literal"><span class="pre">requirements.txt</span></code> file in your virtual environment.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>pip install -r requirements.txt
</pre></div>
</div>
<p>Some modules should be accessible to your python interpreter in order to perform the tests. The called modules are the test <cite>ToolWrappers</cite> and <cite>Models</cite>. You should then add their location to the python path:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">PYTHONPATH</span><span class="o">=</span><span class="s2">&quot;/ThePathToWopmarsSourceFolder/wopmars/test/tagc/base&quot;</span>
<span class="nb">export</span> <span class="nv">PYTHONPATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PYTHONPATH</span><span class="s2">:/ThePathToWopmarsSourceFolder/wopmars/test/tagc/toolwrappers&quot;</span>
</pre></div>
</div>
<p>You are now ready to perform unittests then stay in the source folder and run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>python3 -m unittest discover
</pre></div>
</div>
<p>And the tests should start and be ok. You are now ready to start improving <strong>WoPMaRS</strong></p>
</div>
<div class="section" id="contributing-to-wopmars-documentation">
<h2>Contributing to WoPMaRS documentation<a class="headerlink" href="#contributing-to-wopmars-documentation" title="Permalink to this headline">¶</a></h2>
<p>The WoPMaRS documentation has been done thanks to <a class="reference external" href="http://www.sphinx-doc.org/en/stable/">Sphinx</a>. The documentation has been written according to the <a class="reference external" href="http://docutils.sourceforge.net/rst.html">rST format</a>. There is two type of documentation in <strong>WoPMaRS</strong>:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">docstring</span></code> in the source code</li>
<li>rST files in the <code class="docutils literal"><span class="pre">docs</span></code> folder. Images are stored under the <code class="docutils literal"><span class="pre">docs/images</span></code> folder.</li>
</ul>
<p>To build the <code class="docutils literal"><span class="pre">html</span></code> documentation, go in the <code class="docutils literal"><span class="pre">docs</span></code> folder and type the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>make html
</pre></div>
</div>
<p>The result will be stored in the <code class="docutils literal"><span class="pre">docs/_build/html</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you want to see what other format are available with Sphinx, you can look at the <code class="docutils literal"><span class="pre">Makefile</span></code>. There is an help section but only html has been tested.</p>
</div>
</div>
<div class="section" id="sub-packages-descriptions">
<h2>Sub-packages descriptions<a class="headerlink" href="#sub-packages-descriptions" title="Permalink to this headline">¶</a></h2>
<p>In this section, we will see what are the main sub-packages / folders of <strong>WoPMaRS</strong> and what is inside.</p>
<div class="section" id="bin">
<h3>bin<a class="headerlink" href="#bin" title="Permalink to this headline">¶</a></h3>
<p>Basically, the executable of <strong>WoPMaRS</strong> if you want to run <code class="docutils literal"><span class="pre">wopmars</span></code>, <code class="docutils literal"><span class="pre">bin/wopmars</span></code> is the file you should execute.</p>
</div>
<div class="section" id="docs">
<h3>docs<a class="headerlink" href="#docs" title="Permalink to this headline">¶</a></h3>
<p>This is the folder containing the <strong>WoPMaRS</strong> documentation, written in rst. This folder contains an <code class="docutils literal"><span class="pre">images</span></code> folder which contains graphs and images used for the documentation.</p>
</div>
<div class="section" id="wopmars">
<h3>wopmars<a class="headerlink" href="#wopmars" title="Permalink to this headline">¶</a></h3>
<p>The sources of the project are stored here. There is three sub-directories which have self-explaining names. The <code class="docutils literal"><span class="pre">main</span></code> sub-package contains the actual sources of <strong>WoPMaRS</strong> whereas the <code class="docutils literal"><span class="pre">test</span></code> one contains functional and unit tests. Both hierarchies of files follow the same pattern.</p>
<div class="section" id="wopmars-tagc-example">
<h4>wopmars.tagc.example<a class="headerlink" href="#wopmars-tagc-example" title="Permalink to this headline">¶</a></h4>
<p>This package contains the examples for <strong>WoPMaRS</strong>. They are ready to use examples necessary for the tutorial.</p>
</div>
<div class="section" id="wopmars-tagc-framework">
<h4>wopmars.tagc.framework<a class="headerlink" href="#wopmars-tagc-framework" title="Permalink to this headline">¶</a></h4>
<p>The main classes involved in <strong>WoPMaRS</strong> are stored here. They are spliited into three categories.</p>
<div class="section" id="wopmars-tagc-framework-bdd">
<h5>wopmars.tagc.framework.bdd<a class="headerlink" href="#wopmars-tagc-framework-bdd" title="Permalink to this headline">¶</a></h5>
<p>All the processing related to the database is done here. Every objects that should exist in order to work with the database is stored here:
the <a class="reference internal" href="#wopmars.main.tagc.framework.bdd.SQLManager.SQLManager" title="wopmars.main.tagc.framework.bdd.SQLManager.SQLManager"><code class="xref py py-class docutils literal"><span class="pre">SQLManager</span></code></a> which is used to perform synchronized operations against the database, the <a class="reference internal" href="#wopmars.main.tagc.framework.bdd.WopMarsSession.WopMarsSession" title="wopmars.main.tagc.framework.bdd.WopMarsSession.WopMarsSession"><code class="xref py py-class docutils literal"><span class="pre">WopMarsSession</span></code></a> which is used to bind the Toolwrappers to the database,  the <a class="reference internal" href="#wopmars.main.tagc.framework.bdd.WopMarsQuery.WopMarsQuery" title="wopmars.main.tagc.framework.bdd.WopMarsQuery.WopMarsQuery"><code class="xref py py-class docutils literal"><span class="pre">WopMarsQuery</span></code></a> which is used to create queries that use the WopMaRS machinery There is a package <code class="docutils literal"><span class="pre">tables</span></code> which contains the models related to the <a class="reference internal" href="#history">history</a> of <strong>WoPMaRS</strong>. Among them, the <a class="reference internal" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper" title="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper"><code class="xref py py-class docutils literal"><span class="pre">ToolWrapper</span></code></a> class.</p>
</div>
<div class="section" id="wopmars-tagc-framework-management">
<h5>wopmars.tagc.framework.management<a class="headerlink" href="#wopmars-tagc-framework-management" title="Permalink to this headline">¶</a></h5>
<p>Here are the classes involved in the actual management of the workflow. Which means the building of the <a class="reference internal" href="#wopmars.main.tagc.framework.management.DAG.DAG" title="wopmars.main.tagc.framework.management.DAG.DAG"><code class="xref py py-class docutils literal"><span class="pre">DAG</span></code></a> and the walk through it thanks to the <a class="reference internal" href="#wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager" title="wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager"><code class="xref py py-class docutils literal"><span class="pre">WorkflowManager</span></code></a>. Also, the class responsible of the actual execution of the ToolWrappers, <a class="reference internal" href="#wopmars.main.tagc.framework.management.ToolThread.ToolThread" title="wopmars.main.tagc.framework.management.ToolThread.ToolThread"><code class="xref py py-class docutils literal"><span class="pre">ToolThread</span></code></a> is stored here.</p>
</div>
<div class="section" id="wopmars-tagc-framework-parsing">
<h5>wopmars.tagc.framework.parsing<a class="headerlink" href="#wopmars-tagc-framework-parsing" title="Permalink to this headline">¶</a></h5>
<p>Here are the classes involved in the parsing of the workflow definition file. Among them, the <a class="reference internal" href="#wopmars.main.tagc.framework.parsing.Parser.Parser" title="wopmars.main.tagc.framework.parsing.Parser.Parser"><code class="xref py py-class docutils literal"><span class="pre">Parser</span></code></a> is a pivot between the <a class="reference internal" href="#wopmars.main.tagc.framework.parsing.Reader.Reader" title="wopmars.main.tagc.framework.parsing.Reader.Reader"><code class="xref py py-class docutils literal"><span class="pre">Reader</span></code></a> and the core functioning of <strong>WoPMaRS</strong>.</p>
</div>
</div>
</div>
</div>
<div class="section" id="the-history-of-wopmars-executions">
<span id="history"></span><h2>The history of WoPMaRS executions<a class="headerlink" href="#the-history-of-wopmars-executions" title="Permalink to this headline">¶</a></h2>
<p><strong>WoPMaRS</strong> keeps track of what has been done thanks to an history stored in database with the prefix <code class="docutils literal"><span class="pre">wom</span></code> in table names.</p>
<p>Numerous calls to those tables are done during all the process of the parsing of the definition file and the building of the execution DAG.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The execution DAG is the directed acyclic graph representing the workflow about to be executed</p>
</div>
<p>Here is a list of the tables used for history. All of the associated models are stored under <code class="docutils literal"><span class="pre">wopmars.main.tagc.framework.bdd.tables</span></code>. If you want more informations about the models themselves, you should follow the links to get the code documentation:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">wom_execution</span></code> represented by the model <a class="reference internal" href="#wopmars.main.tagc.framework.bdd.tables.Execution.Execution" title="wopmars.main.tagc.framework.bdd.tables.Execution.Execution"><code class="xref py py-class docutils literal"><span class="pre">Execution</span></code></a></li>
<li><code class="docutils literal"><span class="pre">wom_rule</span></code> represented by the model <a class="reference internal" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper" title="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper"><code class="xref py py-class docutils literal"><span class="pre">ToolWrapper</span></code></a></li>
<li><code class="docutils literal"><span class="pre">wom_type</span></code> represented by the model <a class="reference internal" href="#wopmars.main.tagc.framework.bdd.tables.Type.Type" title="wopmars.main.tagc.framework.bdd.tables.Type.Type"><code class="xref py py-class docutils literal"><span class="pre">Type</span></code></a></li>
<li><code class="docutils literal"><span class="pre">wom_file</span></code> represented by the model <a class="reference internal" href="#wopmars.main.tagc.framework.bdd.tables.IOFilePut.IOFilePut" title="wopmars.main.tagc.framework.bdd.tables.IOFilePut.IOFilePut"><code class="xref py py-class docutils literal"><span class="pre">IOFilePut</span></code></a></li>
<li><code class="docutils literal"><span class="pre">wom_table</span></code> represented by the model <a class="reference internal" href="#wopmars.main.tagc.framework.bdd.tables.IODbPut.IODbPut" title="wopmars.main.tagc.framework.bdd.tables.IODbPut.IODbPut"><code class="xref py py-class docutils literal"><span class="pre">IODbPut</span></code></a></li>
<li><code class="docutils literal"><span class="pre">wom_modification_table</span></code> represented by the model <code class="xref py py-class docutils literal"><span class="pre">ModificationTable</span></code></li>
<li><code class="docutils literal"><span class="pre">wom_option</span></code> represented by the model <a class="reference internal" href="#wopmars.main.tagc.framework.bdd.tables.Option.Option" title="wopmars.main.tagc.framework.bdd.tables.Option.Option"><code class="xref py py-class docutils literal"><span class="pre">Option</span></code></a></li>
</ul>
<div class="figure align-center" id="id1">
<img alt="_images/mcd.png" src="_images/mcd.png" />
<p class="caption"><span class="caption-text"><em>Here is a detailed entity-relationship model of the history in the database</em></span></p>
</div>
</div>
<div class="section" id="building-the-execution-dag">
<h2>Building the execution DAG<a class="headerlink" href="#building-the-execution-dag" title="Permalink to this headline">¶</a></h2>
<p>The workflow DAG is built from the workflow definition file. However, there is a post treatment of the workflow DAG to get only the rules that the user wants to execute.</p>
<p>The class responsible of the parsing of the workflow definition file (and the <code class="docutils literal"><span class="pre">tool</span></code> command) is <a class="reference internal" href="#wopmars.main.tagc.framework.parsing.Reader.Reader" title="wopmars.main.tagc.framework.parsing.Reader.Reader"><code class="xref py py-class docutils literal"><span class="pre">wopmars.main.tagc.framework.parsing.Reader.Reader</span></code></a>. The class <a class="reference internal" href="#wopmars.main.tagc.framework.parsing.Reader.Reader" title="wopmars.main.tagc.framework.parsing.Reader.Reader"><code class="xref py py-class docutils literal"><span class="pre">Reader</span></code></a> aims to fill the database with the informations relatives to the workflow.</p>
<p>Once all informations regarding the workflow definition file have been stored in the database, the options <code class="docutils literal"><span class="pre">--targetrule</span></code> and <code class="docutils literal"><span class="pre">--sourcerule</span></code> are parsed in order to get only the rules that are intended to be executed by the user (see <a class="reference external" href="use.html#options-and-arguments">Options and Arguments</a> of WoPMaRS).</p>
<p>To build the DAG itself, a class <a class="reference internal" href="#wopmars.main.tagc.framework.management.DAG.DAG" title="wopmars.main.tagc.framework.management.DAG.DAG"><code class="xref py py-class docutils literal"><span class="pre">DAG</span></code></a> which inherit from <code class="docutils literal"><span class="pre">networkx.DiGraph</span></code> has been written. This class takes a set of nodes as argument and build itself by determining which nodes are following which others. Since the nodes are actually <a class="reference internal" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper" title="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper"><code class="xref py py-class docutils literal"><span class="pre">ToolWrapper</span></code></a>, a node follows an other node if one output of the former is in the list of inputs of the last. This information is given by the method <a class="reference internal" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.follows" title="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.follows"><code class="xref py py-meth docutils literal"><span class="pre">follows()</span></code></a> of <a class="reference internal" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper" title="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper"><code class="xref py py-class docutils literal"><span class="pre">ToolWrapper</span></code></a>.</p>
</div>
<div class="section" id="executing-the-dag">
<h2>Executing the DAG<a class="headerlink" href="#executing-the-dag" title="Permalink to this headline">¶</a></h2>
<p>It is the <a class="reference internal" href="#wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager" title="wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager"><code class="xref py py-class docutils literal"><span class="pre">WorkflowManager</span></code></a> which is responsible of executing the DAG. The main methods of this class are <a class="reference internal" href="#wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.run_queue" title="wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.run_queue"><code class="xref py py-meth docutils literal"><span class="pre">run_queue()</span></code></a> and <a class="reference internal" href="#wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.execute_from" title="wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.execute_from"><code class="xref py py-meth docutils literal"><span class="pre">execute_from()</span></code></a>. Basically, <code class="docutils literal"><span class="pre">execute_from</span></code> fill the queue with the <cite>Toolwrappers</cite> that should be executed soon and <code class="docutils literal"><span class="pre">run_queue</span></code> actually execute the queue after performing some tests on the inputs of the <cite>Toolwrappers</cite>.</p>
</div>
<div class="section" id="managing-the-database">
<h2>Managing the DataBase<a class="headerlink" href="#managing-the-database" title="Permalink to this headline">¶</a></h2>
<p>The main class responsible of managing the database is the <a class="reference internal" href="#wopmars.main.tagc.framework.bdd.SQLManager.SQLManager" title="wopmars.main.tagc.framework.bdd.SQLManager.SQLManager"><code class="xref py py-class docutils literal"><span class="pre">SQLManager</span></code></a>. This class is represented in <strong>WoPMaRS</strong> as a synchronized <a class="reference internal" href="#wopmars.main.tagc.utils.Singleton.SingletonMixin" title="wopmars.main.tagc.utils.Singleton.SingletonMixin"><code class="xref py py-class docutils literal"><span class="pre">SingletonMixin</span></code></a>. To access the Singleton instance, all you need to to is <code class="docutils literal"><span class="pre">SQLManager.instance()</span></code></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A singleton, as described in the <cite>Wikipedia article &lt;https://en.wikipedia.org/wiki/Singleton_pattern&gt;_</cite> is a design pattern which allows to access anywhere and at anytime to the same instance of a given class. In our case, this is important because the SQLManager is the object which actually access the database and this needs to be synchronized.</p>
</div>
<p>The constructor of the <code class="docutils literal"><span class="pre">SQLManager</span></code> create the actual database and enable the foreign key support (<a class="reference external" href="https://www.sqlite.org/foreignkeys.html#fk_enable">https://www.sqlite.org/foreignkeys.html#fk_enable</a>) in order to let the user benefit from this constraint.</p>
<p>To get a <code class="xref py py-class docutils literal"><span class="pre">WopMarsSession</span></code> associated with this SQLManager, you just need to call <code class="xref py py-meth docutils literal"><span class="pre">get_session()`()</span></code> and you can use the session anywhere, in any thread and at any time. Everything is already synchronized.</p>
<hr class="docutils" />
<dl class="class">
<dt id="wopmars.main.tagc.utils.exceptions.WopMarsException.WopMarsException">
<em class="property">class </em><code class="descclassname">wopmars.main.tagc.utils.exceptions.WopMarsException.</code><code class="descname">WopMarsException</code><span class="sig-paren">(</span><em>context=''</em>, <em>message=''</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.utils.exceptions.WopMarsException.WopMarsException" title="Permalink to this definition">¶</a></dt>
<dd><p>WopMarsException inherit from Exception and is thrown by every part of the .</p>
<p>This exception is thrown with a context and a message. The context is supposed to explain where the exception has
occured while the message gives more specific details about the exception.</p>
</dd></dl>

<hr class="docutils" />
<dl class="class">
<dt id="wopmars.main.tagc.framework.bdd.tables.Execution.Execution">
<em class="property">class </em><code class="descclassname">wopmars.main.tagc.framework.bdd.tables.Execution.</code><code class="descname">Execution</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.Execution.Execution" title="Permalink to this definition">¶</a></dt>
<dd><p>The execution table is a counter of the executions. It allows to discriminate one execution from one other.</p>
<p>If 2 executions are exactly the same, they will be both stocked in the database with different execution numbers.
The times at which the execution has started and finished are stored (as the the time of the whole execution).
The status of the execution is stored with &quot;FINISHED&quot; as possible flags.</p>
</dd></dl>

<hr class="docutils" />
<dl class="class">
<dt id="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper">
<em class="property">class </em><code class="descclassname">wopmars.main.tagc.framework.bdd.tables.ToolWrapper.</code><code class="descname">ToolWrapper</code><span class="sig-paren">(</span><em>rule_name=''</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>The class ToolWrapper is the superclass of the Wrapper which
will be designed by the wrapper developers.</p>
<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.are_inputs_ready">
<code class="descname">are_inputs_ready</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.are_inputs_ready" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if inputs are ready</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">bool - True if inputs are ready.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.follows">
<code class="descname">follows</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.follows" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the &quot;self&quot; follows directly &quot;other&quot; in the execution DAG.</p>
<p>Check whether &quot;other&quot; has one output value in &quot;self&quot; possible input values.
The output value are given from the Relationnal mapping between toolwrappers and related objects:
* IODbPut
* IOFilePut</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>other</strong> -- ToolWrapper that is possibly a predecessor of &quot;self&quot;</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">bool True if &quot;self&quot; follows &quot;other&quot;</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.input_file">
<code class="descname">input_file</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.input_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the path of the specified input file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> -- String the name of the variable containing the path</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.input_table">
<code class="descname">input_table</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.input_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the input table object of the given name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> -- String: the name of the Table object.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.is_content_respected">
<code class="descname">is_content_respected</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.is_content_respected" title="Permalink to this definition">¶</a></dt>
<dd><p>This method checks if the parameters dictionary are properly formed, according to the specifications of the
wrapper developer.</p>
<p>Call of the methods &quot;is_options_respected&quot;, &quot;is_input_respected&quot; and &quot;is_output_respected&quot;</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.is_input_respected">
<code class="descname">is_input_respected</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.is_input_respected" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the input files associated with the toolwrapper are ok according to the toolwrapper developer.</p>
<p>It checks if the output variable names exists or not.
If not, throws a WopMarsParsingException.</p>
<p>This method calls the &quot;specify_input_file&quot; method which have been written by the toolwrapper developer. Since the
options are checked first, the developer can write a conditional behavior depending on the options given for
the toolwrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raise:</th><td class="field-body">WopMarsException</td>
</tr>
</tbody>
</table>
<p>:return:void</p>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.is_options_respected">
<code class="descname">is_options_respected</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.is_options_respected" title="Permalink to this definition">¶</a></dt>
<dd><p>This method check if the params given in the constructor are properly formed for the tool.</p>
<p>It checks if the params names given by the user exists or not, if the type correspond and if the required
options are given.
If not, throws a WopMarsParsingException.</p>
<p>This method calls the &quot;specify_params&quot; method of the toolwrapper. This method should return a dictionnary
associating the name of the option with a String containing the types allowed with it. A &quot;|&quot; is used between
each types allowed for one option.</p>
<p>examples:</p>
<dl class="docutils">
<dt>{</dt>
<dd>'option1': &quot;int&quot;,
'option2': &quot;required|str&quot;,</dd>
</dl>
<p>}
:raise: WopMarsException</p>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.is_output_ok">
<code class="descname">is_output_ok</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.is_output_ok" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the output of self are ready to use.</p>
<dl class="docutils">
<dt>What is checked:</dt>
<dd><dl class="first docutils">
<dt>-for files:</dt>
<dd><ul class="first last simple">
<li>They exists</li>
<li>Their size and date are not None</li>
<li>Their date are after all input dates</li>
<li>Their size and date in bdd are the same than the real ones</li>
</ul>
</dd>
</dl>
<ul class="last">
<li><dl class="first docutils">
<dt>for table:</dt>
<dd><ul class="first last simple">
<li>They exists</li>
<li>Their date are after all input dates</li>
<li>Their date are the same in table 'table' than in 'modification_table'</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.is_output_respected">
<code class="descname">is_output_respected</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.is_output_respected" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the output dictionary given in the constructor is properly formed for the tool.</p>
<p>It checks if the output variable names exists or not.
If not, throws a WopMarsParsingException.</p>
<p>This method calls the &quot;specify_output_file&quot; method which have been written by the toolwrapper developer. Since the
options are checked first, the developer can write a conditional behavior depending on the options given for
the toolwrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raise:</th><td class="field-body">WopMarsException</td>
</tr>
</tbody>
</table>
<p>:return:void</p>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.output_file">
<code class="descname">output_file</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.output_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the path of the specified output file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> -- String the name of the variable containing the path</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.output_table">
<code class="descname">output_table</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.output_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the output table object of the given name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> -- String: the name of the Table object.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.same_input_than">
<code class="descname">same_input_than</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.same_input_than" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the other ToolWrapper have the same input than self.</p>
<dl class="docutils">
<dt>The input are say &quot;the same&quot; if:</dt>
<dd><ul class="first last simple">
<li>The table have the same name and the same last modifcation datetime</li>
<li>The file have the same name, the same lastm mdoficiation datetime and the same size</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>other</strong> -- </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.set_args_date_and_size">
<code class="descname">set_args_date_and_size</code><span class="sig-paren">(</span><em>type</em>, <em>dry=False</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.set_args_date_and_size" title="Permalink to this definition">¶</a></dt>
<dd><p>The date and the size of IOPut elements are set (if needed).</p>
<p>The date and the size of the files are set according to the actual date of last modification and size of the system files</p>
<p>The date of the tables are set according to the date of last modification notified in the modification_table table
If the type of IOPut is &quot;output&quot; and the execution is &quot;not dry&quot;, the date in modification_table is set to the
current time.time() datetime.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>type</strong> -- String &quot;input&quot; or &quot;output&quot;</li>
<li><strong>dry</strong> -- Bool (True or False)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.specify_input_file_dict">
<code class="descname">specify_input_file_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.specify_input_file_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the dict of input_files:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Dict: &lt;String&gt;INPUTNAME : &lt;IOFilePut&gt;INPUT</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.specify_input_table_dict">
<code class="descname">specify_input_table_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.specify_input_table_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the dict of input_table:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Dict: &lt;String&gt;INPUTNAME : &lt;IODbPut&gt;INPUT</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.specify_output_file_dict">
<code class="descname">specify_output_file_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.specify_output_file_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the dict of output_files:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Dict: &lt;String&gt;OUTPUTNAME : &lt;IOFilePut&gt;OUTPUT</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.specify_output_table_dict">
<code class="descname">specify_output_table_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.ToolWrapper.ToolWrapper.specify_output_table_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the dict of output_table:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Dict: &lt;String&gt;OUTPUTNAME : &lt;IODbPut&gt;OUTPUT</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<hr class="docutils" />
<dl class="class">
<dt id="wopmars.main.tagc.framework.bdd.tables.IOFilePut.IOFilePut">
<em class="property">class </em><code class="descclassname">wopmars.main.tagc.framework.bdd.tables.IOFilePut.</code><code class="descname">IOFilePut</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.IOFilePut.IOFilePut" title="Permalink to this definition">¶</a></dt>
<dd><p>This class extends IOPut and is specific to file input or output</p>
<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.tables.IOFilePut.IOFilePut.is_ready">
<code class="descname">is_ready</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.IOFilePut.IOFilePut.is_ready" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the file exists on the hard drive</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">boolean: True if it exists, false if not</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<hr class="docutils" />
<dl class="class">
<dt id="wopmars.main.tagc.framework.bdd.tables.IODbPut.IODbPut">
<em class="property">class </em><code class="descclassname">wopmars.main.tagc.framework.bdd.tables.IODbPut.</code><code class="descname">IODbPut</code><span class="sig-paren">(</span><em>model</em>, <em>tablename</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.IODbPut.IODbPut" title="Permalink to this definition">¶</a></dt>
<dd><p>This class extends IOPut and is specific to table input or output</p>
<dl class="staticmethod">
<dt id="wopmars.main.tagc.framework.bdd.tables.IODbPut.IODbPut.get_execution_tables">
<em class="property">static </em><code class="descname">get_execution_tables</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.IODbPut.IODbPut.get_execution_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all the IODbPut objects found in model IODbPut.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">ResultSet IODbPut objects</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="wopmars.main.tagc.framework.bdd.tables.IODbPut.IODbPut.import_models">
<em class="property">static </em><code class="descname">import_models</code><span class="sig-paren">(</span><em>table_names</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.IODbPut.IODbPut.import_models" title="Permalink to this definition">¶</a></dt>
<dd><p>Import all the given models</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>table_names</strong> -- Iterable containing strings of path to the models</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="wopmars.main.tagc.framework.bdd.tables.IODbPut.IODbPut.set_tables_properties">
<em class="property">static </em><code class="descname">set_tables_properties</code><span class="sig-paren">(</span><em>tables</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.IODbPut.IODbPut.set_tables_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>Import the models of the current execution and then associate models with IODbPut objects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tables</strong> -- Resulset IODbPut objects</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<hr class="docutils" />
<dl class="class">
<dt id="wopmars.main.tagc.framework.bdd.tables.Type.Type">
<em class="property">class </em><code class="descclassname">wopmars.main.tagc.framework.bdd.tables.Type.</code><code class="descname">Type</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.Type.Type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<hr class="docutils" />
<dl class="class">
<dt id="wopmars.main.tagc.framework.bdd.SQLManager.SQLManager">
<em class="property">class </em><code class="descclassname">wopmars.main.tagc.framework.bdd.SQLManager.</code><code class="descname">SQLManager</code><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.SQLManager.SQLManager" title="Permalink to this definition">¶</a></dt>
<dd><p>The class SQLManager is responsible of all operations performed on the database.</p>
<p>The SQLManager is a synchronized Singleton which may be accessible from any thread, at any time. This is allowed
by the SingletonMixin superclass and a read/write lock.</p>
<p>Provides a WopMarsSession through the method &quot;get_session&quot;. The session is used to perform calls to the database.
Provides the engine if necessary through &quot;get_engine&quot;.
Allows commiting and rollbacking operations of a given session through methods &quot;commit&quot; and &quot;rollback&quot;.
Allows querying operations from a given query: all, one, first, count, one_or_none, scalar. Through &quot;result_factory&quot;.
Allows executing statements through the &quot;execute&quot; method.
Allows droping and creating tables from table names (&quot;create&quot; and &quot;drop&quot;), list of table models (&quot;drop_table_list&quot;)
and all (&quot;create_all&quot; and &quot;drop_all&quot;).</p>
<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.commit">
<code class="descname">commit</code><span class="sig-paren">(</span><em>session</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit the current session.</p>
<p>The SQLManager wrap the sqlite queue for commiting operations on database in order to do not trigger the error due
to the time-out operations.</p>
<p>This is done thanks to a read_write_lock: sqlmanager is a synchronized singleton with synchronized methods.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>session</strong> -- SQLAlchemy session object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.create">
<code class="descname">create</code><span class="sig-paren">(</span><em>tablename</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the declarative Base to create a table from its tablename.</p>
<p>The tablename is the name of the base represented in the databse (independent of the Table model)
:param tablename:</p>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.create_all">
<code class="descname">create_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.create_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the declarative Base to create all tables found.</p>
<p>If you want to create a table, you should be sure that it has been imported first.</p>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.drop">
<code class="descname">drop</code><span class="sig-paren">(</span><em>tablename</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.drop" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the declarative Base to drop a table from its tablename.</p>
<p>The tablename is the name of the base represented in the databse (independent of the Table model)
:param tablename:</p>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.drop_all">
<code class="descname">drop_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.drop_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the declarative Base to drop all tables found. Should only be used for testing purposes.</p>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.drop_table_content_list">
<code class="descname">drop_table_content_list</code><span class="sig-paren">(</span><em>list_str_table</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.drop_table_content_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a list of tables from the list of their tablenames.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>list_str_table</strong> -- [String] the name of the tables.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.drop_table_list">
<code class="descname">drop_table_list</code><span class="sig-paren">(</span><em>list_str_table</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.drop_table_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a list of tables from the list of their tablenames.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>list_str_table</strong> -- [String] the name of the tables.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>session</em>, <em>statement</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Allow to execute a statement object on the given session.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>session</strong> -- SQLAlchemy session object.</li>
<li><strong>statement</strong> -- SQLAlchemy statement object.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.get_engine">
<code class="descname">get_engine</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.get_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the engine of the current execution.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">engine</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.get_session">
<code class="descname">get_session</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.get_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a WopmarsSession associated with this SQLmanager.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">WopMarsSession</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.result_factory">
<code class="descname">result_factory</code><span class="sig-paren">(</span><em>query</em>, <em>method</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.result_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the result of the query, using the demanded method.</p>
<dl class="docutils">
<dt>The result_factory wrap the methods for querying database:</dt>
<dd><ul class="first last simple">
<li>all</li>
<li>first</li>
<li>one</li>
<li>one_or_none</li>
<li>scalar</li>
<li>count</li>
</ul>
</dd>
</dl>
<p>This is necessary to use the ReadLock of WopMars instead of the one from SQLite.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>query</strong> -- The query object, ready to be performed.</li>
<li><strong>method</strong> -- String signifying the method which have to be used for querying database</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The result of the query.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.rollback">
<code class="descname">rollback</code><span class="sig-paren">(</span><em>session</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.SQLManager.SQLManager.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Rollback the given session.</p>
<p>The SQLManager wrap the sqlite queue for rollbacking operations on database in order to do not trigger the error due
to the time-out operations.</p>
<p>This is done thanks to a read_write_lock: sqlmanager is a synchronized singleton with synchronized methods.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>session</strong> -- SQLAlchemy session object</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<hr class="docutils" />
<dl class="class">
<dt id="wopmars.main.tagc.framework.bdd.WopMarsSession.WopMarsSession">
<em class="property">class </em><code class="descclassname">wopmars.main.tagc.framework.bdd.WopMarsSession.</code><code class="descname">WopMarsSession</code><span class="sig-paren">(</span><em>session</em>, <em>manager</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.WopMarsSession.WopMarsSession" title="Permalink to this definition">¶</a></dt>
<dd><p>class WopMarsSession</p>
<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.WopMarsSession.WopMarsSession.add">
<code class="descname">add</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.WopMarsSession.WopMarsSession.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add.py
:param item:
:return:</p>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.WopMarsSession.WopMarsSession.commit">
<code class="descname">commit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.WopMarsSession.WopMarsSession.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate changes on the database.
:return:</p>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.WopMarsSession.WopMarsSession.get_or_create">
<code class="descname">get_or_create</code><span class="sig-paren">(</span><em>model</em>, <em>defaults=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.WopMarsSession.WopMarsSession.get_or_create" title="Permalink to this definition">¶</a></dt>
<dd><p>This method allows to check if an entry exist in database and if not, create it. It also return a boolean
which says if the entry has been created (True) or not (False)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>model</strong> -- A SQLAlchemy model</li>
<li><strong>defaults</strong> -- Dict containing the default parameter to use in fields if the entry doesn't exist.</li>
<li><strong>kwargs</strong> -- Specify the values of the fields which are looked for. Create them if not.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">tuple: (instance of the created entry, boolean)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<hr class="docutils" />
<dl class="class">
<dt id="wopmars.main.tagc.framework.bdd.WopMarsQuery.WopMarsQuery">
<em class="property">class </em><code class="descclassname">wopmars.main.tagc.framework.bdd.WopMarsQuery.</code><code class="descname">WopMarsQuery</code><span class="sig-paren">(</span><em>entities</em>, <em>session=None</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.WopMarsQuery.WopMarsQuery" title="Permalink to this definition">¶</a></dt>
<dd><p>This class extend the Query class from sqlalchemy.orm in purpose to use the lock provided by the SQLManager in order
to query the database.</p>
<dl class="docutils">
<dt>It overide all methods relatives to finish a query:</dt>
<dd><ul class="first last simple">
<li>all</li>
<li>one</li>
<li>first</li>
<li>count</li>
<li>one_or_none</li>
<li>scalar</li>
</ul>
</dd>
</dl>
</dd></dl>

<hr class="docutils" />
<dl class="class">
<dt id="wopmars.main.tagc.framework.bdd.tables.Option.Option">
<em class="property">class </em><code class="descclassname">wopmars.main.tagc.framework.bdd.tables.Option.</code><code class="descname">Option</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.Option.Option" title="Permalink to this definition">¶</a></dt>
<dd><p>The Option class handle a key and a value and is able to say if
it is properly formated</p>
<dl class="method">
<dt id="wopmars.main.tagc.framework.bdd.tables.Option.Option.correspond">
<code class="descname">correspond</code><span class="sig-paren">(</span><em>carac</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.bdd.tables.Option.Option.correspond" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the option value correspond to the type given by the tool wrapper. Throws a WopMarsParsingException if
not.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raise:</th><td class="field-body">WopMarsException</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><strong>carac</strong> -- String containing the carac of the option in the format: &quot;carac1|carac2|carc3&quot;</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<hr class="docutils" />
<dl class="class">
<dt id="wopmars.main.tagc.framework.management.DAG.DAG">
<em class="property">class </em><code class="descclassname">wopmars.main.tagc.framework.management.DAG.</code><code class="descname">DAG</code><span class="sig-paren">(</span><em>set_tools=None</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.DAG.DAG" title="Permalink to this definition">¶</a></dt>
<dd><p>This class inherits from DiGraph class from NetworkX and allows
to represent a DAG of tool nodes</p>
<dl class="method">
<dt id="wopmars.main.tagc.framework.management.DAG.DAG.get_all_predecessors">
<code class="descname">get_all_predecessors</code><span class="sig-paren">(</span><em>node</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.DAG.DAG.get_all_predecessors" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the set of all predecessors nodes from a given node in the DAG (node included).
:return:</p>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.management.DAG.DAG.get_all_successors">
<code class="descname">get_all_successors</code><span class="sig-paren">(</span><em>node</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.DAG.DAG.get_all_successors" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the set of all successors nodes from a given node in the DAG (node included).
:return:</p>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.management.DAG.DAG.successors">
<code class="descname">successors</code><span class="sig-paren">(</span><em>node</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.DAG.DAG.successors" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the successors of a node.</p>
<p>The method is overwhelmed because if a node is None, then, the root nodes are returned.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>node</strong> -- an object that is used as Node in the DAG or None.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">[node]:  the successors of the given node or the node at the root of the DAG.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.management.DAG.DAG.write_dot">
<code class="descname">write_dot</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.DAG.DAG.write_dot" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the dot file.</p>
<p>The .ps can be built from the dot file with the command line: &quot;dot -Tps {filename}.dot - o {filename}.ps&quot;</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">void</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<hr class="docutils" />
<dl class="class">
<dt id="wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager">
<em class="property">class </em><code class="descclassname">wopmars.main.tagc.framework.management.WorkflowManager.</code><code class="descname">WorkflowManager</code><a class="headerlink" href="#wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager" title="Permalink to this definition">¶</a></dt>
<dd><p>The WorkflowManager class manage all the workflow execution.</p>
<dl class="docutils">
<dt>WorkflowManager will ask the parser to build the DAG then execute it. The execution of the DAG is done as following:</dt>
<dd><p class="first">1- The workflow manager take the &quot;tool_dag&quot; with all the rules of the workflow and build the &quot;dag_to_exec&quot; which
will be actually executed according to the &quot;target rule&quot; and &quot;source rule&quot; options.
2- The method &quot;execute_from()&quot; is call without argument, meaning that the execution begin at the top of the dag
(the root of the tree).
3- The nodes are gathered thanks to the &quot;successors&quot; method of the DAG.
4- Each node is wrapped inside a ToolThread object which will be added to the queue.
5- Each ToolThread is executed (ordered) as follows:</p>
<blockquote>
<div>a- If the inputs are ready: they are executed.
b- If not, they are put in the buffer.</div></blockquote>
<p class="last">6- When the ToolThread has finished its execution, a notification of success is sent.
7- The method &quot;execute_from&quot; is called again with the succeeded ToolWrapper as argument.
8- Loop to the 3rd step
9- When the DAG is finished, the software exits</p>
</dd>
</dl>
<p>Every exception or error are raised to the top level of the software (tagc.py) through WopMarsException with
a String explaining the context and details about the exception.</p>
<dl class="method">
<dt id="wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.all_predecessors_have_run">
<code class="descname">all_predecessors_have_run</code><span class="sig-paren">(</span><em>tw</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.all_predecessors_have_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if all the predecessors of the given toolwrapper have yet been executed in this workflow.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tw</strong> -- ToolWrapper</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.check_buffer">
<code class="descname">check_buffer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.check_buffer" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the buffer contains ToolWrapper that are ready.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">bool: True if there is at least one toolwrapper that is READY in the buffer.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.execute_from">
<code class="descname">execute_from</code><span class="sig-paren">(</span><em>tw=None</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.execute_from" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the dag from the toolwrappers in the list given.</p>
<p>The next nodes are taken thanks to the &quot;successors()&quot; method of the DAG and are put into the queue.
The &quot;run_queue()&quot; is then called.</p>
<p>A trace of the already_runned ToolWrapper objects is kept in order to avoid duplicate execution.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>node</strong> -- ToolWrapper a node of the DAG or None, if it executes from the root.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">void</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.get_dag_to_exec">
<code class="descname">get_dag_to_exec</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.get_dag_to_exec" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the dag to exec in terms of --sourcerule option and --targetrule option.</p>
<p>The source rule is checked first (there should not be both set because of the checks at the begining of the software)</p>
<p>If sourcerule is set, then it is its successors that are searched in the whole dag.
Else, it is its predecessors.</p>
<p>The set of obtained rules are used to build the &quot;dag_to_exec&quot;. The nodes returned by get_all_successors and
get_all_predecessors are implicitly all related.
:return:</p>
</dd></dl>

<dl class="staticmethod">
<dt id="wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.is_this_tool_already_done">
<em class="property">static </em><code class="descname">is_this_tool_already_done</code><span class="sig-paren">(</span><em>tw</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.is_this_tool_already_done" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if conditions for saying &quot;The output of this ToolWrapper are already available&quot; are filled.</p>
<dl class="docutils">
<dt>The conditions are:</dt>
<dd><ul class="first last simple">
<li>The ToolWrapper exist in bdd (named = tw_old)</li>
<li>The tw_old param are the same than the same which is about to start</li>
<li>the tw_old inputs are the same</li>
<li>the tw_old outputs are ok and ready</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tw</strong> -- </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.notify_failure">
<code class="descname">notify_failure</code><span class="sig-paren">(</span><em>thread_toolwrapper</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.notify_failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle thread_toolwrapper failure by re-puting it in the queue.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>thread_toolwrapper</strong> -- ToolWrapper thread that just failed</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.notify_success">
<code class="descname">notify_success</code><span class="sig-paren">(</span><em>thread_toolwrapper</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.notify_success" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle thread_toolwrapper success by continuing the dag.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>thread_toolwrapper</strong> -- ToolWrapper thread that just succeed</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the dag then execute it.</p>
<p>The database is setUp here if workflow side tables have not been created yet.</p>
<p>The dag is taken thanks to the &quot;parse()&quot; method of the parser. And then pruned by the get_dag_to_exec method
which will set the right DAG to be executed.
Then, execute_from is called with no argument to get the origin nodes.
:return:</p>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.run_queue">
<code class="descname">run_queue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.run_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Call start() method of all elements of the queue.</p>
<p>The tools inside the queue are taken then their inputs are checked. If they are ready, the tools are started.
If not, they are put in a buffer list of &quot;not ready tools&quot; or &quot;ready but has not necessary ressources available
tools&quot;.</p>
<p>The start method is called with a dry argument, if it appears that the input of the ToolWrapper are the same
than in a previous execution, and that the output are already ready. The dry parameter is set to True and the
start method will only simulate the execution.</p>
<p>After that, the code check for the state of the workflow and gather the informations to see if the workflow
is finished, if it encounter an error or if it is currently running.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><strong>WopMarsException</strong> -- The workflow encounter a problem and must stop.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">void</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.set_finishing_informations">
<code class="descname">set_finishing_informations</code><span class="sig-paren">(</span><em>finished_at</em>, <em>status</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.WorkflowManager.WorkflowManager.set_finishing_informations" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the finsihing information of the whole workflow.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>finished_at</strong> -- datetime.datetime object representing the finishing date of the workflow</li>
<li><strong>status</strong> -- the final status of the workflow</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<hr class="docutils" />
<dl class="class">
<dt id="wopmars.main.tagc.framework.management.ToolThread.ToolThread">
<em class="property">class </em><code class="descclassname">wopmars.main.tagc.framework.management.ToolThread.</code><code class="descname">ToolThread</code><span class="sig-paren">(</span><em>toolwrapper</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.ToolThread.ToolThread" title="Permalink to this definition">¶</a></dt>
<dd><p>class ToolThread</p>
<dl class="method">
<dt id="wopmars.main.tagc.framework.management.ToolThread.ToolThread.fire_failure">
<code class="descname">fire_failure</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.ToolThread.ToolThread.fire_failure" title="Permalink to this definition">¶</a></dt>
<dd><p>Notify all ToolWrapperObservers that the execution has failed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.management.ToolThread.ToolThread.fire_success">
<code class="descname">fire_success</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.ToolThread.ToolThread.fire_success" title="Permalink to this definition">¶</a></dt>
<dd><p>Notify all ToolWrapperObservers that the run has suceeded</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.management.ToolThread.ToolThread.get_observers">
<code class="descname">get_observers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.ToolThread.ToolThread.get_observers" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the set of observers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">set observers</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.management.ToolThread.ToolThread.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.ToolThread.ToolThread.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the tool and fire events.
:return:</p>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.management.ToolThread.ToolThread.subscribe">
<code class="descname">subscribe</code><span class="sig-paren">(</span><em>obs</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.management.ToolThread.ToolThread.subscribe" title="Permalink to this definition">¶</a></dt>
<dd><p>An observer subscribes to the obervable.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>obs</strong> -- </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<hr class="docutils" />
<dl class="class">
<dt id="wopmars.main.tagc.framework.parsing.Parser.Parser">
<em class="property">class </em><code class="descclassname">wopmars.main.tagc.framework.parsing.Parser.</code><code class="descname">Parser</code><a class="headerlink" href="#wopmars.main.tagc.framework.parsing.Parser.Parser" title="Permalink to this definition">¶</a></dt>
<dd><p>The Parser is used to organize the parsing of the Workflow Definition File.</p>
<p>The aim of the Parser is to send the DAG representing the execution graph.</p>
<dl class="staticmethod">
<dt id="wopmars.main.tagc.framework.parsing.Parser.Parser.get_set_toolwrappers">
<em class="property">static </em><code class="descname">get_set_toolwrappers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.parsing.Parser.Parser.get_set_toolwrappers" title="Permalink to this definition">¶</a></dt>
<dd><p>Ask the bdd for toolwrappers of the current execution.</p>
<p>The current execution is defined as the one with the highest id (it is auto_incrementing)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Set([ToolWrapper]) the set of toolwrappers of the current execution.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.parsing.Parser.Parser.parse">
<code class="descname">parse</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.parsing.Parser.Parser.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Organize the parsing of the Workflow Definition File or the Tool if only one tool is provided thanks to the
tool command.</p>
<p>Call the &quot;read()&quot; or the &quot;load_one_toolwrapper&quot; (depending on the use or not of tool command) method of the
reader to insert in database the set of objects of the workflow.</p>
<p>Then, the toolwrappers of the last execution are got back before calling the dag to build itself from the set of tools.</p>
<p>The DAG is checked to actually being a Directed Acyclic Graph.</p>
<p>If The &quot;--dot&quot; option is set, the dot and ps file are wrote here.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raise:</th><td class="field-body">WopMarsParsingException if the workflow is not a DAG.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the DAG</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<hr class="docutils" />
<dl class="class">
<dt id="wopmars.main.tagc.framework.parsing.Reader.Reader">
<em class="property">class </em><code class="descclassname">wopmars.main.tagc.framework.parsing.Reader.</code><code class="descname">Reader</code><a class="headerlink" href="#wopmars.main.tagc.framework.parsing.Reader.Reader" title="Permalink to this definition">¶</a></dt>
<dd><p>The reader class is used to read the workflow definition file,
build the ToolWrapper objects and perform tests on the quality
of the definition file.</p>
<dl class="method">
<dt id="wopmars.main.tagc.framework.parsing.Reader.Reader.load_definition_file">
<code class="descname">load_definition_file</code><span class="sig-paren">(</span><em>s_definition_file</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.parsing.Reader.Reader.load_definition_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the definition file from the given path.</p>
<p>The integrity (form) of the definition is done during this step but no tests are performed regarding to the
actual content of the definition file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>s_definition_file</strong> -- String path to the definition file</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="wopmars.main.tagc.framework.parsing.Reader.Reader.check_duplicate_rules">
<em class="property">static </em><code class="descname">check_duplicate_rules</code><span class="sig-paren">(</span><em>file</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.parsing.Reader.Reader.check_duplicate_rules" title="Permalink to this definition">¶</a></dt>
<dd><p>This method raises an exception if the workflow definition file contains duplicate keys.</p>
<p>The workflow definition file should contain rules with different name. It is therefore recommended to not
call rules with tool names but functionality instead. Example:</p>
<dl class="docutils">
<dt>rule get_snp:</dt>
<dd><p class="first">tool: SNPGetter
input:</p>
<blockquote>
<div>etc..</div></blockquote>
<dl class="last docutils">
<dt>output:</dt>
<dd>etc..</dd>
<dt>params:</dt>
<dd>etc..</dd>
</dl>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>file</strong> -- String this is the content of the definition file</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.parsing.Reader.Reader.load_one_toolwrapper">
<code class="descname">load_one_toolwrapper</code><span class="sig-paren">(</span><em>s_toolwrapper</em>, <em>s_dict_inputs</em>, <em>s_dict_outputs</em>, <em>s_dict_params</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.parsing.Reader.Reader.load_one_toolwrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Method called when the 'tool' command is used. It is equivalent to the &quot;red&quot; method but create a workflow with
only one toolwrapper</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>s_toolwrapper</strong> -- The name of the toolwrapper (will be imported)</li>
<li><strong>s_dict_inputs</strong> -- A string containing the dict of input files</li>
<li><strong>s_dict_outputs</strong> -- A string containing the dict of output files</li>
<li><strong>s_dict_params</strong> -- A string containing the dict of params</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raise:</th><td class="field-body"><p class="first last">WopmarsException</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.parsing.Reader.Reader.read">
<code class="descname">read</code><span class="sig-paren">(</span><em>s_definition_file</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.parsing.Reader.Reader.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the file given and build the workflow in the database.</p>
<p>The definition file is supposed to be properly formed. The validation of the content of the definition is done
during the instanciation of the tools.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body">s_definition_file: String containing the path to the definition file.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raise:</th><td class="field-body">WopmarsException</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.parsing.Reader.Reader.create_toolwrapper_entry">
<code class="descname">create_toolwrapper_entry</code><span class="sig-paren">(</span><em>str_rule_name</em>, <em>str_wrapper_name</em>, <em>dict_dict_dict_elm</em>, <em>input_entry</em>, <em>output_entry</em><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.parsing.Reader.Reader.create_toolwrapper_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Actual creating of the toolwrapper object.</p>
<p>The toolwrapper object is an entry of the table rule in the resulting database.</p>
<p>If the scoped_session has current modification, they probably will be commited during this method:
tables are created and this can only be done with clean session.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>str_rule_name</strong> -- String containing the name of the rule in which the toolwrapper will be used.</li>
<li><strong>str_wrapper_name</strong> -- String containing the name of the toolwrapper. It will be used for importing the</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>correct module and then for creating the class.
:param dict_dict_dict_elm: Dict &lt;String: Dict &lt;String: String&gt;&gt;  of &quot;input&quot;s &quot;output&quot;s and &quot;params&quot; and will be used
to make relations between options / input / output and the toolwrapper.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">TooLWrapper instance</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="wopmars.main.tagc.framework.parsing.Reader.Reader.is_grammar_respected">
<code class="descname">is_grammar_respected</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#wopmars.main.tagc.framework.parsing.Reader.Reader.is_grammar_respected" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the definition file respects the grammar. Throw an exception if not.</p>
<p>The grammar is the following:</p>
<p>NEWLINE configfile
WoPMaRS = rule
rule       = &quot;rule&quot; (identifier | &quot;&quot;) &quot;:&quot; ruleparams
ni         = NEWLINE INDENT
ruleparams = [ni tool] [ni input] [ni output] [ni params]
filesortables = (ni files|ni tables){0-2}
files = &quot;file&quot;  &quot;:&quot; (ni identifier ”:” stringliteral)+
tables = &quot;table&quot;  &quot;:&quot; (ni identifier ”:” stringliteral)+
NEWLINE WoPMaRS
tool       = &quot;tool&quot;   &quot;:&quot;  identifier ”:” stringliteral
input      = &quot;input&quot;  &quot;:&quot; ni filesortables
output     = &quot;output&quot; &quot;:&quot; ni filesortables
params     = &quot;params&quot; &quot;:&quot; (identifier ”:” stringliteral ni?)+</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raise:</th><td class="field-body">WopMarsParsingException</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<hr class="docutils" />
<dl class="class">
<dt id="wopmars.main.tagc.utils.Singleton.SingletonMixin">
<em class="property">class </em><code class="descclassname">wopmars.main.tagc.utils.Singleton.</code><code class="descname">SingletonMixin</code><a class="headerlink" href="#wopmars.main.tagc.utils.Singleton.SingletonMixin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Software Documentation</a><ul>
<li><a class="reference internal" href="#table-of-content">Table of Content</a></li>
<li><a class="reference internal" href="#setting-up-wopmars-development-environment">Setting up WoPMaRS development environment</a></li>
<li><a class="reference internal" href="#contributing-to-wopmars-documentation">Contributing to WoPMaRS documentation</a></li>
<li><a class="reference internal" href="#sub-packages-descriptions">Sub-packages descriptions</a><ul>
<li><a class="reference internal" href="#bin">bin</a></li>
<li><a class="reference internal" href="#docs">docs</a></li>
<li><a class="reference internal" href="#wopmars">wopmars</a><ul>
<li><a class="reference internal" href="#wopmars-tagc-example">wopmars.tagc.example</a></li>
<li><a class="reference internal" href="#wopmars-tagc-framework">wopmars.tagc.framework</a><ul>
<li><a class="reference internal" href="#wopmars-tagc-framework-bdd">wopmars.tagc.framework.bdd</a></li>
<li><a class="reference internal" href="#wopmars-tagc-framework-management">wopmars.tagc.framework.management</a></li>
<li><a class="reference internal" href="#wopmars-tagc-framework-parsing">wopmars.tagc.framework.parsing</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#the-history-of-wopmars-executions">The history of WoPMaRS executions</a></li>
<li><a class="reference internal" href="#building-the-execution-dag">Building the execution DAG</a></li>
<li><a class="reference internal" href="#executing-the-dag">Executing the DAG</a></li>
<li><a class="reference internal" href="#managing-the-database">Managing the DataBase</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="dev_wrapper.html" title="previous chapter">ToolWrapper development</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Luc Giffon, Aitor Gonzalez, Lionel Spinelli.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
    </div>

    

    
  </body>
</html>